# Gray zone test cases for Promptfoo evaluation.
# These are curated from the classical pipeline's gray zone (score 4.0-6.0).
#
# To regenerate from actual data, run:
#   python -m src.optimize --export-tests config/promptfoo/datasets/gray_zone_tests.yaml
#
# For now, using representative synthetic examples.

- vars:
    medical_history_a: |
      === MEDICAL HISTORY ===
      CONDITIONS (active/historical):
      - Diabetes mellitus type 2 (onset: 2010-03-15, ongoing)
      - Essential hypertension (onset: 2005-11-22, ongoing)
      - Chronic kidney disease stage 2 (onset: 2018-06-01, ongoing)
      MEDICATIONS (current/past):
      - Metformin 500mg (2010-03-15 to present) for Diabetes mellitus type 2
      - Lisinopril 10mg (2005-11-22 to present) for Essential hypertension
      KEY OBSERVATIONS:
      - Hemoglobin A1c: 7.2% (2025-08-15)
      - Body Mass Index: 31.2 kg/m2 (2025-08-15)
    medical_history_b: |
      === MEDICAL HISTORY ===
      CONDITIONS (active/historical):
      - Diabetes mellitus type 2 (onset: 2010-03-15, ongoing)
      - Essential hypertension (onset: 2005-11-22, ongoing)
      - Chronic kidney disease stage 2 (onset: 2018-06-01, ongoing)
      MEDICATIONS (current/past):
      - Metformin hydrochloride 500mg (2010-04-01 to present) for Diabetes
      - Lisinopril 10mg (2005-12-01 to present) for Hypertension
      KEY OBSERVATIONS:
      - Hemoglobin A1c: 7.1% (2025-09-20)
      - Body Mass Index: 31.5 kg/m2 (2025-09-20)
  assert:
    - type: icontains
      value: "true"
    - type: javascript
      value: "output.toLowerCase().includes('match') || output.toLowerCase().includes('true')"

- vars:
    medical_history_a: |
      === MEDICAL HISTORY ===
      CONDITIONS (active/historical):
      - Diabetes mellitus type 2 (onset: 2015-07-20, ongoing)
      - Hyperlipidemia (onset: 2016-01-10, ongoing)
      MEDICATIONS (current/past):
      - Glipizide 5mg (2015-07-20 to present) for Diabetes
      - Atorvastatin 20mg (2016-01-10 to present) for Hyperlipidemia
      KEY OBSERVATIONS:
      - Hemoglobin A1c: 8.1% (2025-06-01)
    medical_history_b: |
      === MEDICAL HISTORY ===
      CONDITIONS (active/historical):
      - Diabetes mellitus type 2 (onset: 2008-03-01, ongoing)
      - Essential hypertension (onset: 2010-05-15, ongoing)
      - Obesity (onset: 2008-03-01, ongoing)
      MEDICATIONS (current/past):
      - Metformin 1000mg (2008-03-01 to present) for Diabetes
      - Amlodipine 5mg (2010-05-15 to present) for Hypertension
      KEY OBSERVATIONS:
      - Hemoglobin A1c: 6.8% (2025-07-15)
  assert:
    - type: icontains
      value: "false"
    - type: javascript
      value: "output.toLowerCase().includes('no match') || output.toLowerCase().includes('false')"

- vars:
    medical_history_a: |
      === MEDICAL HISTORY ===
      CONDITIONS: none
      MEDICATIONS: none
      ENCOUNTERS: none
      KEY OBSERVATIONS: none
    medical_history_b: |
      === MEDICAL HISTORY ===
      CONDITIONS (active/historical):
      - Acute bronchitis (onset: 2024-01-10, resolved 2024-01-24)
      MEDICATIONS (current/past):
      - Amoxicillin 500mg (2024-01-10 to 2024-01-20)
      ENCOUNTERS (summarized):
      - 1 ambulatory visits (2024-2024)
  assert:
    - type: icontains
      value: "false"

- vars:
    medical_history_a: |
      === MEDICAL HISTORY ===
      CONDITIONS (active/historical):
      - Rheumatoid arthritis (onset: 2012-09-05, ongoing)
      - Osteoporosis (onset: 2019-03-20, ongoing)
      MEDICATIONS (current/past):
      - Methotrexate 15mg weekly (2012-10-01 to present) for Rheumatoid arthritis
      - Alendronate 70mg weekly (2019-04-01 to present) for Osteoporosis
      PROCEDURES:
      - Knee arthroscopy (2018-11-15)
      - Bone density scan (2019-03-20)
    medical_history_b: |
      === MEDICAL HISTORY ===
      CONDITIONS (active/historical):
      - Rheumatoid arthritis (onset: 2012-09-05, ongoing)
      - Osteoporosis (onset: 2019-03-20, ongoing)
      MEDICATIONS (current/past):
      - Methotrexate 15mg/week (2012-10-15 to present) for RA
      - Alendronate sodium 70mg weekly (2019-04-15 to present) for Osteoporosis
      PROCEDURES:
      - Right knee arthroscopy (2018-11-15)
      - DXA scan (2019-03-20)
  assert:
    - type: icontains
      value: "true"
